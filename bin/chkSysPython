#!/bin/bash
# Mengjuei Hsieh
die(){
    test "$*" && echo "$*" || true
    exit 1
}

if [ "_${1}" != "_" ]; then
    test -x $1 && PYTHON=$1
else
    PYTHON=/usr/bin/python
fi

test -f ${PYTHON} || die "ERROR: system python missing"
$(${PYTHON} -V 2>&1 | awk '{print $2}' | awk -F \. '{
if ((10*$1+$2)<27) print "ERROR: system python is too old";
}')
$(${PYTHON} -V 2>&1 | awk '{print $2}' | awk -F \. '{
if ((10*$1+$2)>29) print "ERROR: system python3 is not supported";
}')
