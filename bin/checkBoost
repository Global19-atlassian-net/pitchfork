#!/bin/bash

die(){
    test "$*" && echo "$*" || true
    exit 1
}

if [ ! -e ${1}/boost/version.hpp ]; then
   die "[ERROR] wrong BOOST_INCLUDE (${1}), check your HAVE_BOOST value"
fi
#if ! grep '#define BOOST_VERSION ' ${1}/boost/version.hpp; then
#   die "[ERROR] wrong BOOST_INCLUDE (${1}), check your HAVE_BOOST value"
#fi

_VERSION=$(awk '/^#define BOOST_VERSION /{print $3}' ${1}/boost/version.hpp)
if [ "_$_VERSION" = "_" ]; then
   die "[ERROR] failed to parse boost version, check your HAVE_BOOST value"
elif [ $_VERSION -lt 105600 ]; then
   die "[ERROR] boost version too old, please don't use HAVE_BOOST"
fi
